# 目标
- `vi` 简介
- 打开和新建文件
- 三种工作模式
- 常用命令
- 常用命令速查

# 01. vi简介
## 1.1 学习vi的目的
- 在工作中，要对 **服务器** 上的文件进行 **简单** 的修改， 可以使用 `ssh` 远程登录到服务器上，并使用 `vi` 进行快速的编辑即可
- 常见需要要修改的文件包括：
  - **源程序**
  - **配置文件**，例如`ssh`的配置文件`~/.ssh/config`
> - 在没有图形界面的环境下，要编辑文件，`vi`是最佳选择！
> - 每一个要使用Linux的程序员，都应该或多或少的学习一些`vi`常用命令 
## 1.2 vi和vim
- 在很多`Linux`发行版中，直接把`vi`做成 `vim`的软链接
### vi
- `vi`是`Visual interface`的简称，是`Linux`中**最经典**的文本编辑器
- `vi`的设计核心思想--**让程序员的手指始终保持在键盘的核心区域，就能完成所有的编辑操作**
- `vi`的特点：
  - **没有图形界面**的**功能强大**的编辑器
  - 只能是编辑**文本内容**，不能对字体、段落进行排版
  - 没有菜单
  - 只有命令
- `vi`编辑器在`系统管理、服务器管理`编辑文件时，**其功能永远不是图形界面的编辑器能比拟的**
### vim
**vim=vi improved**
- `vim`是从`vi`发展出来的一个文本编辑器，支持`代码补全`、`编译`及`错误跳转`等方便编程的功能特别丰富，在程序员中被广泛使用，被称为**编辑器之神**
**vim 安装**
```
apt get install vim
```
# 02.打开和新建文件
- 在终端输入`vi`**在后面跟上文件名**即可
```
vi 文件名
```
- 如果文件已经存在，会直接打开文件夹
- 如果文件不存在，会新建一个文件夹
## 2.1打开文件并且定位行
- 在日常工作中，可能会遇到**打开一个文件、并定位到指定行**的情况
- 例如：在开发时，**知道某一行代码有错误**，可以**快速定位**到出错代码的位置
- 这个时候，可以使用以下命令打开文件
```
vi 文件名 +行数
```
> *提示：如果只带上`+`而不指定行号，会直接定位到文件末尾

vim显示行数
```
vim使用命令set number
```
这样设置只是一次有效，如果每次有效，需要编辑vim的配置文件，在其中加入一行：`set number`
```
sudo vim /etc/vim/vimrc
```
## 2.2异常处理
- 如果`vi`异常退出，在磁盘上可能会保存有交换文件
- 下次使用`vi`编辑该文件时，会看到以下屏幕信息，按下字母`d`可以**删除交换文件**即可
> *提示：按下键盘时，注意关闭输入法*
![搜狗截图20220305071712](https://user-images.githubusercontent.com/12490550/156854821-87072c30-5c72-4a19-8100-f4cdafd0572a.png)
# 03.三种工作模式
- `vi`有三种基本工作模式：
  1. **0.1命令模式**
    - **打开文件首先进入命令模式**，是使用`vi`的**入口**
    - 通过**命令**对文件进行常规的编辑操作，例如**定位**、**翻页**、**复制**、**粘贴**、**删除**…………
    - 在其他图形编辑器下，通过**快捷键**或者**鼠标**实现的操作，都在**命令模式**下实现
  2. **02.末行模式**--执行**保存、退出**等操作
    - 要退出`vi`返回到控制台，需要在末行模式下输入命令
    - **末行模式**是`vi`的**出口**
  3. **编辑模式**--正常的编辑文字
![image](https://user-images.githubusercontent.com/12490550/156856171-9859d91c-ccb6-44aa-82f7-7c2f5de03798.png)
> *提示`Touch Bar`的Mac电脑上，按`Esc`不方便，可以用`Ctrl+[`替代*
## 末行命令模式
|命令|英文|功能|
|---|---|---|
|w|write|保存|
|q|quit|退出，没有保存，不允许退出|
|q!|quit|强行退出、不保存退出|
|wq|write & quit|保存并退出|
|x||保存并退出|
